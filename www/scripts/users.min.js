$(document).ready(function(){$('input[name="selectuser"]').change(function(){$(".btn-inactive").removeClass("btn-inactive").addClass("btn-active")});$(".confirmation-container").dialog({modal:!0,width:300,height:200,autoOpen:!1,title:"Confirmation Required"});$("body").on("click","#delete.btn-active",function(){var e=$('input:radio[name="selectuser"]:checked').val(),a="tr.user"+e,h="<p>Are you sure you want to delete the selected user account ("+$(a+" td.name").html()+")?</p>";$(".confirmation-container").html(h);
    $(".confirmation-container").dialog({buttons:{Confirm:function(){$(this).dialog("close");var g=$.ajax({async:!1,type:"DELETE",dataType:"json",url:"webservice.php/users/"+e,timeout:1E4,cache:!1});g.done(function(e){!0==e.result&&($(a).remove(),$("#delete").removeClass("btn-active").addClass("btn-inactive"),$("#update").removeClass("btn-active").addClass("btn-inactive"),$("div.notification-container p").addClass("notification-success").html("The system successfully deleted the user."));"string"===typeof e.result&&
    $("div.notification-container p").addClass("notification-error").html(e.result)});g.fail(function(){$("div.notification-container p").addClass("notification-error").html("The system was unable to delete the user.")})},Cancel:function(){$(this).dialog("close")}}});$(".confirmation-container").dialog("open")});$("body").on("click","#update.btn-active",function(){var e=$('input:radio[name="selectuser"]:checked').val(),a="tr.user"+e,h=$(a+" td.netid").html(),g=$(a+" td.name").html(),l=$(a+" td.email").html(),
    m=$(a+" td.role select option:selected").val(),a=$(a+" td.permission select option:selected").val(),e=$.ajax({async:!1,type:"PUT",dataType:"json",data:{id:e,netid:h,name:g,email:l,role:m,permission:a},url:"webservice.php/users",timeout:1E4,cache:!1});e.done(function(e){!0==e.result&&$("div.notification-container p").addClass("notification-success").html("The system successfully updated the user.");"string"===typeof e.result&&$("div.notification-container p").removeClass("notification-success").addClass("notification-error").html(e.result)});
    e.fail(function(){$("div.notification-container p").addClass("notification-error").html("The system was unable to update the user.")})});$("#add.btn-active").click(function(e){$(".add-user-container").dialog({modal:!0,width:450,autoOpen:!1,draggable:!1,title:"Add User",buttons:{"Add User":function(){var a=$(".add-user-container #netid").val(),h=$(".add-user-container #accesslevel").find(":selected").val(),g=$(".add-user-container #permission").find(":selected").val(),a=$.ajax({async:!1,type:"POST",
    dataType:"json",data:{netid:a,role:h,permission:g},url:"webservice.php/users",timeout:1E4,cache:!1});a.done(function(a){if(!0==a.result){var g=[],h=[];$(".notification-container p").addClass("notification-success").html("The system successfully added the user.");$.ajax({async:!1,type:"GET",dataType:"json",url:"webservice.php/roles",timeout:1E4,cache:!1}).done(function(e){for(b=0;b<e.result.length;b++){var f=e.result[b];g.push({id:f.id,description:f.description})}});$.ajax({async:!1,type:"GET",dataType:"json",
    url:"webservice.php/permissions",timeout:1E4,cache:!1}).done(function(e){for(c=0;c<e.result.length;c++){var f=e.result[c];h.push({id:f.id,description:f.description})}});a=$.ajax({async:!1,type:"GET",dataType:"json",url:"webservice.php/users",timeout:1E4,cache:!1});a.done(function(a){var f="";if(null!==a.result)for(var j=0;j<a.result.length;j++){f+='<tr class="user'+a.result[j].id+'"><td class="id"><input type="radio" name="selectuser" class="table-check" value="'+a.result[j].id+'" /></td><td class="name">'+
    a.result[j].name+'</td><td class="netid">'+a.result[j].netid+'</td><td class="email">'+a.result[j].email+'</td><td class="role"><select name="selectuserrole">';for(d=0;d<g.length;d++){var k=g[d],f=f+('<option value="'+k.id+'"');k.id==a.result[j].role&&(f+='selected="selected"');f+=">"+k.description+"</option>"}f+='</select></td><td class="permission"><select name="selectuserpermission">';for(e=0;e<h.length;e++)k=h[e],f+='<option value="'+k.id+'"',k.id==a.result[j].permissions&&(f+='selected="selected"'),
    f+=">"+k.description+"</option>";f+="</select></td></tr>"}else f='<tr><td colspan="4">No users exist in database.</td></tr>';$("table tbody").html(f)});a.fail(function(){alert("The system was unable to refresh the user list. The page will now reload to attempt to refresh it.");location.reload(!0)})}else $(".notification-container p").addClass("notification-error").html("The system was unable to add the user.")});a.fail(function(){$(".notification-container p").addClass("notification-error").html("The system was unable to add the user.")});
    $(".add-user-container #netid").val("");$(".add-user-container #accesslevel").find(":selected").prop("selected",!1);$(".add-user-container #permission").find(":selected").prop("selected",!1);$(this).addClass("hidden").dialog("close")},Cancel:function(){$(this).dialog("close")}}});$(".add-user-container").removeClass("hidden").dialog("open")})});