$(document).ready(function(){$("body").on("click","table tbody input",function(){0>=$("table tbody input:checkbox:checked").length?($("#delete").removeClass("btn-active").addClass("btn-inactive"),$("#download").removeClass("btn-active").addClass("btn-inactive")):$(".btn-inactive").removeClass("btn-inactive").addClass("btn-active")});$("li.navigation-item a.collapsed").parent().children("ul").hide();$("li.navigation-item a").click(function(){"2"!=$(this).parent().attr("data-parent")?$("#upload").removeClass("btn-inactive").addClass("btn-active"):
    $("#upload").removeClass("btn-active").addClass("btn-inactive");$(".table-error").addClass("hidden").empty();$("#delete").removeClass("btn-active").addClass("btn-inactive");$("#download").removeClass("btn-active").addClass("btn-inactive");$(".selected").removeClass("selected");$(this).toggleClass("collapsed").toggleClass("selected");$(this).hasClass("collapsed")?$(this).parent().children("ul").hide():$(this).parent().children("ul").show();var a=$(this).parent().attr("data-id"),a=$.ajax({async:!1,
    type:"GET",dataType:"json",url:"webservice.php/documents/"+a,timeout:1E4,cache:!1});a.done(function(a){var b="";if(null!==a.result)for(var d=0;d<a.result.length;d++)b+='<tr><td><input type="checkbox" id="'+a.result[d].id+'" /></td><td>'+a.result[d].file_name+"</td><td>"+a.result[d].mimetype+"</td><td>"+a.result[d].file_size+"</td></tr>";else b='<tr><td colspan="4">No documents exist in this folder.</td></tr>';$("table tbody").html(b)});a.fail(function(){$(".table-error").removeClass("hidden").html("The system was unable to retrieve the document(s) in the specified folder.")})});
    $("body").on("click","#delete.btn-active",function(){$("div.notification-container p").removeClass("notification-error notification-success").empty();var a=[],c=[];$("tbody input:checked").each(function(){a.push($(this).attr("id"));c.push($(this).parent().parent())});$(".confirmation-container").html("<p>Are you sure you want to delete the selected document(s)?</p>");$(".confirmation-container").dialog({modal:!0,draggable:!1,autoOpen:!1,title:"Confirmation Required",buttons:{Confirm:function(){$(this).dialog("close");
        var b=$.ajax({async:!1,type:"DELETE",dataType:"json",url:"webservice.php/documents/"+a.join("-"),timeout:1E4,cache:!1});b.done(function(a){if(!0==a.result){for(var b=0;b<c.length;b++)$(c[b]).remove();$("#delete").removeClass("btn-active").addClass("btn-inactive");$("#download").removeClass("btn-active").addClass("btn-inactive");$("div.notification-container p").addClass("notification-success").html("The system successfully deleted the document(s).")}"string"===typeof a.result&&$("div.notification-container p").addClass("notification-error").html(a.result)});
        b.fail(function(){$("div.notification-container p").addClass("notification-error").html("The system was unable to delete the document(s).")})},Cancel:function(){$(this).dialog("close")}}});$(".confirmation-container").dialog("open")});$("body").on("click","#download.btn-active",function(){$("div.notification-container p").removeClass("notification-error notification-success").empty();var a=[];$("tbody input:checked").each(function(){a.push($(this).attr("id"))});var c=$.ajax({async:!1,type:"GET",dataType:"json",
        url:"webservice.php/download/"+a.join("-"),timeout:1E4,cache:!1});c.done(function(a){null===a.result?$("div.notification-container p").addClass("notification-error").html("The system was unable to prepare the documents for download."):(a='<p>The system created a zip archive of the files you requested.&nbsp;&nbsp;<a href="'+a.result+'">Click here</a> to download the archive</p>',$(".file-download-container").html(a),$(".file-download-container").dialog({modal:!0,draggable:!1,autoOpen:!1,title:"File Ready for Download",
        close:function(){$(".file-download-container").empty();$("tbody input:checked").each(function(){$(this).prop("checked",!1)});$("#download").removeClass("btn-active").addClass("btn-inactive")}}),$(".file-download-container").dialog("open"))});c.fail(function(){$("div.notification-container p").addClass("notification-error").html("The system was unable to prepare the documents for download.")})});$("#downloadall").click(function(){$("div.notification-container p").removeClass("notification-error notification-success").empty();
        $.ajax({async:!1,type:"GET",dataType:"json",url:"webservice.php/download",timeout:1E4,cache:!1}).done(function(a){null===a.result?$("div.notification-container p").addClass("notification-error").html("The system was unable to prepare the documents for download."):(a='<p>The system created a zip archive of the files you requested.&nbsp;&nbsp;<a href="'+a.result+'">Click here</a> to download the archive</p>',$(".file-download-container").html(a),$(".file-download-container").dialog({modal:!0,draggable:!1,
            autoOpen:!1,title:"File Ready for Download",close:function(){$(".file-download-container").empty()}}),$(".file-download-container").dialog("open"))})});$("body").on("click","#upload.btn-active",function(){$(".file-upload-container").dialog({modal:!0,width:525,autoOpen:!1,draggable:!1,title:"Upload File"});$(".file-upload-container").removeClass("hidden").dialog("open")})});